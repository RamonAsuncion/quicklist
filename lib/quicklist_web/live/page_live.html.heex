<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quicklist</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100 transition-colors duration-300">
    <section
      id="todo-app"
      class="todoapp bg-white shadow-md rounded-lg w-full max-w-lg p-6 mx-auto transition-colors duration-300 relative"
    >
      <button
        id="theme-toggle"
        class="absolute top-4 right-4 p-2 bg-transparent rounded focus:outline-none"
      >
        <i class="fas fa-sun text-gray-800" id="theme-icon"></i>
      </button>
      <header class="header mb-4 text-center">
        <h1 class="text-3xl font-semibold">Quicklist</h1>
        <form phx-submit="create" id="form" class="mt-4">
          <input
            id="new_todo"
            class="new-todo w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"
            type="text"
            name="text"
            placeholder="What needs to be done?"
            autofocus
            required
          />
        </form>
      </header>
      <section class="main">
        <ul class="todo-list space-y-4">
          <%= for item <- @items do %>
            <li data-id={item.id} class={if item.completed, do: "line-through", else: ""}>
              <div class="todo-item flex justify-between items-center">
                <div class="view flex items-center flex-grow">
                  <input
                    class="toggle w-5 h-5 mr-2"
                    type="checkbox"
                    phx-value-id={item.id}
                    phx-click="toggle"
                    checked={item.completed}
                  />
                  <label class="transition-colors duration-300 text-gray-800">
                    <%= item.title %>
                  </label>
                </div>
                <button
                  class="destroy ml-4 transition-transform duration-200 ease-in-out hover:scale-110 hover:text-red-500"
                  phx-click="delete"
                  phx-value-id={item.id}
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                  >
                    <line x1="18" y1="6" x2="6" y2="18" />
                    <line x1="6" y1="6" x2="18" y2="18" />
                  </svg>
                </button>
              </div>
            </li>
          <% end %>
        </ul>
      </section>

      <footer
        id="footer"
        class="footer mt-4 flex justify-between items-center transition-colors duration-300"
      >
        <span id="item-count" class="todo-count text-gray-600 transition-colors duration-300">
          <strong><%= length(@items) %></strong> item(s) left
        </span>
        <button
          class="clear-completed bg-transparent text-red-500 hover:text-red-700"
          phx-click="clear_completed"
        >
          Clear completed
        </button>
      </footer>
    </section>
  </body>
</html>
